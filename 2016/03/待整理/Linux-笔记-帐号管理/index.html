<!DOCTYPE html><html lang=""><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Linux用户管理学习笔记 | CS Learning of CHNwentao</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.3"><script><!-- hexo-inject:begin --><!-- hexo-inject:end -->var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?js?c4c99183a6a02c53d4760ae1995c3b38";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var GLOBAL = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  localSearch: {"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}"},"path":"search.xml"}
} </script><link rel="icon" href="/favicon.ico"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#帐号与群组概念"><span class="toc-number">1.</span> <span class="toc-text">帐号与群组概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#etc-passwd-结构"><span class="toc-number">1.1.</span> <span class="toc-text">/etc/passwd 结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#etc-shadow-文件结构"><span class="toc-number">1.2.</span> <span class="toc-text">/etc/shadow 文件结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#etc-group-文件结构"><span class="toc-number">1.3.</span> <span class="toc-text">/etc/group 文件结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#etc-gshadow"><span class="toc-number">1.4.</span> <span class="toc-text">/etc/gshadow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#有效群组-effective-group-与初始群组-initial-group"><span class="toc-number">1.5.</span> <span class="toc-text">有效群组(effective group)与初始群组(initial group)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#群组查询命令与有效群组的切换groups-newgrp"><span class="toc-number">1.6.</span> <span class="toc-text">群组查询命令与有效群组的切换groups/newgrp</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#帐号管理"><span class="toc-number">2.</span> <span class="toc-text">帐号管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#新增与移除使用者：-useradd-相关设定档-passwd-usermod-userdel"><span class="toc-number">2.1.</span> <span class="toc-text">新增与移除使用者： useradd, 相关设定档, passwd, usermod, userdel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一般使用者常用的帐号相关指令id-finger-chfn-chsh"><span class="toc-number">2.2.</span> <span class="toc-text">一般使用者常用的帐号相关指令id/finger/chfn/chsh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新增与移除群组groupadd-groupmod-groupdel"><span class="toc-number">2.3.</span> <span class="toc-text">新增与移除群组groupadd/groupmod/groupdel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gpasswd：群组管理员功能"><span class="toc-number">2.4.</span> <span class="toc-text">gpasswd：群组管理员功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ACL的使用（Access-Control-List）"><span class="toc-number">3.</span> <span class="toc-text">ACL的使用（Access Control List）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用者身份切换"><span class="toc-number">4.</span> <span class="toc-text">使用者身份切换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#visudo-与-etc-sudoers"><span class="toc-number">4.1.</span> <span class="toc-text">visudo 与/etc/sudoers</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用者的特殊shell-与PAM-模组"><span class="toc-number">5.</span> <span class="toc-text">使用者的特殊shell 与PAM 模组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户信息查询"><span class="toc-number">6.</span> <span class="toc-text">用户信息查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查询用户：-last-lastlog"><span class="toc-number">6.1.</span> <span class="toc-text">查询用户： last, lastlog</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户对话-write-mesg-wall"><span class="toc-number">6.2.</span> <span class="toc-text">用户对话 write, mesg, wall</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户邮件信箱：-mail"><span class="toc-number">6.3.</span> <span class="toc-text">用户邮件信箱： mail</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#帐号相关的检查工具pwck、pwconv、pwunconv"><span class="toc-number">6.4.</span> <span class="toc-text">帐号相关的检查工具pwck、pwconv、pwunconv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#大量建置帐号范本"><span class="toc-number">6.5.</span> <span class="toc-text">大量建置帐号范本</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://7xiuu0.com1.z0.glb.clouddn.com/17-11-23/22222257.jpg"></div><div class="author-info__name text-center">Wente Guo</div><div class="author-info__description text-center">一个学习的博客网站，专注于计算机科学、机器学习、数据挖掘等的 技术分享、相关咨询及经验总结</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">148</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">196</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">20</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container" style="background-image: url(true);"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">CS Learning of CHNwentao</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span></div><div id="post-info"><div id="post-title">Linux用户管理学习笔记</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-03-11</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"> </i><a class="post-meta__categories" href="/categories/Linux/">Linux</a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">3,330</span><span class="post-meta__separator">|</span><span>Reading time: 11 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><h2 id="帐号与群组概念"><a href="#帐号与群组概念" class="headerlink" title="帐号与群组概念"></a>帐号与群组概念</h2><p>每个登入的使用者至少都会取得两个ID ，一个是使用者ID (User ID ，简称UID)、一个是群组ID (Group ID ，简称GID)。<br>使用者帐号有关的有两个非常重要的文件，一个是管理使用者UID/GID重要参数的<code>/etc/passwd</code> ，一个则是专门管理密码相关资料的<code>/etc/ shadow</code><br><a id="more"></a></p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><h3 id="etc-passwd-结构"><a href="#etc-passwd-结构" class="headerlink" title="/etc/passwd 结构"></a>/etc/passwd 结构</h3><p>注意：这个任何人都可以看，没有什么保密性，所以密码为X<br>有7个项目，用：隔开</p>
<p>帐号名称：<br>密码（x）：<br>UID（0 root; 1-999系统帐号；1000~60000用户）：<br>GID：<br>使用者信息说明栏：<br>主目录：<br>Shell（比较需要注意的是，有一个shell可以用来替代成让帐号无法取得shell环境的登入动作！那就是<code>/sbin/nologin</code>）</p>
<h3 id="etc-shadow-文件结构"><a href="#etc-shadow-文件结构" class="headerlink" title="/etc/shadow 文件结构"></a>/etc/shadow 文件结构</h3><p>只有root可以读写，<br>九个项目组成</p>
<p>帐号名称：</p>
<p>密码：(经过编码的密码(加密)，不是真的密码)</p>
<p>最近更动密码的日期：(Linux日期的时间是以1970年1月1日作为1而累加的日期,所以显示的一个数)</p>
<p>密码不可被更动的天数：(是0的话，表示密码随时可以更动的意思) </p>
<p>密码需要重新变更的天数：(99999 (计算为273年)的话，那就表示，呵呵，密码的变更没有强制性之意)</p>
<p>密码需要变更期限前的警告天数：()</p>
<p>帐号失效日期：0代表密码过期立刻失效，如果是-1则是代表密码永远不会失效</p>
<p>保留：</p>
<h3 id="etc-group-文件结构"><a href="#etc-group-文件结构" class="headerlink" title="/etc/group 文件结构"></a>/etc/group 文件结构</h3><p>分为四栏</p>
<p>1.群组名称：</p>
<p>2.群组密码：</p>
<p>3.GID：</p>
<p>4.此群组支持的帐号名称：(添加时注意不要有空格；不显示root 和创建者)</p>
<h3 id="etc-gshadow"><a href="#etc-gshadow" class="headerlink" title="/etc/gshadow"></a><code>/etc/gshadow</code></h3><p>分四个项目</p>
<p>1.群组名称<br>2.密码栏，同样的，开头为! 表示无合法密码，所以无群组管理员<br>3.群组管理员的帐号(相关资讯在gpasswd中介绍)<br>4.有加入该群组支援的所属帐号(与/etc/group 内容相同！)</p>
<h3 id="有效群组-effective-group-与初始群组-initial-group"><a href="#有效群组-effective-group-与初始群组-initial-group" class="headerlink" title="有效群组(effective group)与初始群组(initial group)"></a>有效群组(effective group)与初始群组(initial group)</h3><p>在读取/写入/执行文件时，针对群组部分，只要是users, wheel与dmtsai这三个群组拥有的功能，我dmtsai这个使用者都能够拥有，但是新建的时候不是，<br>通常有效群组的作用是在新建文件。</p>
<h3 id="群组查询命令与有效群组的切换groups-newgrp"><a href="#群组查询命令与有效群组的切换groups-newgrp" class="headerlink" title="群组查询命令与有效群组的切换groups/newgrp"></a>群组查询命令与有效群组的切换groups/newgrp</h3><p>输入<code>groups</code>在这个输出的信息中， 第一个输出的群组即为有效群组(effective group)了</p>
<p>有效群组的切换newgrp的命令：<code>newgrp groupname</code></p>
<h2 id="帐号管理"><a href="#帐号管理" class="headerlink" title="帐号管理"></a>帐号管理</h2><h3 id="新增与移除使用者：-useradd-相关设定档-passwd-usermod-userdel"><a href="#新增与移除使用者：-useradd-相关设定档-passwd-usermod-userdel" class="headerlink" title="新增与移除使用者： useradd, 相关设定档, passwd, usermod, userdel"></a>新增与移除使用者： useradd, 相关设定档, passwd, usermod, userdel</h3><p><code>useradd [-u UID] [-g初始群组] [-G次要群组] [-mM] [-c说明栏] [-d家目录绝对路径] [- s shell]使用者帐号名</code><br>选项与参数：<br>-u ：后面接的是UID ，是一组数字。直接指定一个特定的UID 给这个帐号；<br>-g ：后面接的那个群组名称就是我们上面提到的initial group 啦～<br>      该群组的GID 会被放置到/etc/passwd 的第四个栏位内。<br>-G ：后面接的群组名称则是这个帐号还可以加入的群组。<br>      这个选项与参数会修改/etc/group 内的相关资料喔！<br>-M ：强制！不要建立使用者家目录！(系统帐号预设值)<br>-m ：强制！要建立使用者家目录！(一般帐号预设值)<br>-c ：这个就是/etc/passwd 的第五栏的说明内容啦～可以随便我们设定的啦～<br>-d ：指定某个目录成为家目录，而不要使用预设值。务必使用绝对路径！<br>-r ：建立一个系统的帐号，这个帐号的UID 会有限制(参考/etc/login.defs)<br>-s ：后面接一个shell ，若没有指定则预设是/bin/bash 的啦～<br>-e ：后面接一个日期，格式为『YYYY-MM-DD』此项目可写入shadow 第八栏位，亦即帐号失效日的设定项目啰；<br>-f ：后面接shadow 的第七栏位项目，指定密码是否会失效。0为立刻失效，-1 为永远不失效(密码只会过期而强制于登入时重新设定而已。)</p>
<p>设置时知道底下几个文件：</p>
<p>使用者帐号与密码参数方面的文件：<code>/etc/passwd, /etc/shadow</code>PAM (Pluggable Authentication Modules, 嵌入式模组) 的机制！</p>
<p>使用者群组相关方面的文件：<code>/etc/group, /etc/gshadow</code><br>使用者的家目录：<code>/home/帐号名称</code></p>
<p>其实useradd 的预设值查询：<code>useradd -D</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GROUP=100		 &lt;==预设的群组 </span><br><span class="line">HOME=/home		 &lt;==预设的主目录所在目录 </span><br><span class="line">INACTIVE=-1		 &lt;==密码失效日，在shadow内的第7栏 </span><br><span class="line">EXPIRE=			 &lt;==帐号失效日，在shadow内的第8栏 </span><br><span class="line">SHELL=/bin/sh		 &lt;==预设的shell </span><br><span class="line">SKEL=/etc/skel		 &lt;==使用者家目录的内容资料参考目录 </span><br><span class="line">CREATE_MAIL_SPOOL=no    &lt;==是否主动帮使用者建立邮件信箱(mailbox)</span><br></pre></td></tr></table></figure>
<p>passwd </p>
<p><code>passwd [--stdin] [帐号名称]</code>   &lt;==所有人均可使用来改自己的密码<br><code>passwd [-l] [-u] [--stdin] [-S]  [-n日数] [-x日数] [-w日数] [-i日期]帐号</code> &lt;==root功能<br>选项与参数：<br>–stdin ：可以透过来自前一个管线的资料，作为密码输入，对shell script 有帮助！<br>-l ：是Lock 的意思，会将/etc/shadow 第二栏最前面加上! 使密码失效；<br>-u ：与-l 相对，是Unlock 的意思！<br>-S ：列出密码相关参数，亦即shadow 文件内的大部分资讯。<br>-n ：后面接天数，shadow 的第4 栏位，多久不可修改密码天数<br>-x ：后面接天数，shadow 的第5 栏位，多久内必须要更动密码<br>-w ：后面接天数，shadow 的第6 栏位，密码过期前的警告天数<br>-i ：后面接『日期』，shadow 的第7 栏位，密码失效日期</p>
<p><strong>易错</strong>：要帮一般帐号建立密码需要使用<code>passwd 帐号</code>的格式，使用<code>passwd</code>表示修改自己的密码！</p>
<p>chage<br><code>chage [-ldEImMW]帐号名</code><br>选项与参数：<br>-l ：列出该帐号的详细密码参数；<br>-d ：后面接日期，修改shadow 第三栏位(最近一次更改密码的日期)，格式YYYY-MM-DD<br>-E ：后面接日期，修改shadow 第八栏位(帐号失效日)，格式YYYY-MM-DD<br>-I ：后面接天数，修改shadow 第七栏位(密码失效日期)<br>-m ：后面接天数，修改shadow 第四栏位(密码最短保留天数)<br>-M ：后面接天数，修改shadow 第五栏位(密码多久需要进行变更)<br>-W ：后面接天数，修改shadow 第六栏位(密码过期前警告日期)</p>
<p>usermod<br><code>usermod [-cdegGlsuLU] username</code><br>选项与参数：<br>-c ：后面接帐号的说明，即/etc/passwd 第五栏的说明栏，可以加入一些帐号的说明。<br>-d ：后面接帐号的家目录，即修改/etc/passwd 的第六栏；<br>-e ：后面接日期，格式是YYYY-MM-DD 也就是在/etc/shadow 内的第八个栏位资料啦！<br>-f ：后面接天数，为shadow 的第七栏位。<br>-g ：后面接初始群组，修改/etc/passwd 的第四个栏位，亦即是GID 的栏位！<br>-G ：后面接次要群组，修改这个使用者能够支援的群组，修改的是/etc/group 啰～<br>-a ：与-G 合用，可『增加次要群组的支援』而非『设定』喔！<br>-l ：后面接帐号名称。亦即是修改帐号名称， /etc/passwd 的第一栏！<br>-s ：后面接Shell 的实际文件，例如/bin/bash 或/bin/csh 等等。<br>-u ：后面接UID 数字啦！即/etc/passwd 第三栏的资料；<br>-L ：暂时将使用者的密码冻结，让他无法登入。其实仅改/etc/shadow 的密码栏。<br>-U ：将/etc/shadow 密码栏的! 拿掉，解冻啦！</p>
<p>userdel<br> <code>userdel [-r] username</code><br>选项与参数：<br>-r ：连同使用者的家目录也一起删除</p>
<h3 id="一般使用者常用的帐号相关指令id-finger-chfn-chsh"><a href="#一般使用者常用的帐号相关指令id-finger-chfn-chsh" class="headerlink" title="一般使用者常用的帐号相关指令id/finger/chfn/chsh"></a>一般使用者常用的帐号相关指令id/finger/chfn/chsh</h3><p>id<br><code>id [username]</code> 这个指令则可以查询某人或自己的相关UID/GID 等等的资讯</p>
<p>finger<br><code>finger [-s] username</code><br>选项与参数：<br>-s ：仅列出使用者的帐号、全名、终端机代号与登入时间等等；<br>-m ：列出与后面接的帐号相同者，而不是利用部分比对(包括全名部分)</p>
<p>结果：<br>Never logged in.：<code>figner</code> 还会调查使用者登入主机的情况喔！<br>No mail.：调查<code>/var/spool/mail</code>当中的信箱资料；<br>No Pl​​an.：调查<code>~vbird1/.plan</code> 文件，并将该文件取出来说明</p>
<p>chfn 有点像是： change finger 的意思！<br><code>chfn [-foph] [帐号名]</code><br>选项与参数：<br>-f ：后面接完整的大名；<br>-o ：您办公室的房间号码；<br>-p ：办公室的电话号码；<br>-h ：家里的电话号码！</p>
<p>chsh 这就是change shell 的简写！使用方法就更简单了！</p>
<p><code>chsh [-ls]</code><br>选项与参数：<br>-l ：列出目前系统上面可用的shell ，其实就是/etc/shells 的内容！<br>-s ：设定修改自己的Shell 啰</p>
<h3 id="新增与移除群组groupadd-groupmod-groupdel"><a href="#新增与移除群组groupadd-groupmod-groupdel" class="headerlink" title="新增与移除群组groupadd/groupmod/groupdel"></a>新增与移除群组groupadd/groupmod/groupdel</h3><p><code>groupadd [-g gid] [-r]群组名称</code><br>选项与参数：<br>-g ：后面接某个特定的GID ，用来直接给予某个GID ～<br>-r ：建立系统群组啦！与/etc/login.defs 内的GID_MIN 有关。</p>
<p><code>groupmod [-g gid] [-n group_name]群组名</code><br>选项与参数：<br>-g ：修改既有的GID 数字；<br>-n ：修改既有的群组名称</p>
<p>groupdel 自然就是在删除群组</p>
<h3 id="gpasswd：群组管理员功能"><a href="#gpasswd：群组管理员功能" class="headerlink" title="gpasswd：群组管理员功能"></a>gpasswd：群组管理员功能</h3><p>关于系统管理员(root)做的动作：<br><code>gpasswd groupname</code><br><code>gpasswd [-A user1,...] [-M user3,...] groupname</code><br><code>gpasswd [-rR] groupname</code><br>选项与参数：<br>    ：若没有任何参数时，表示给予groupname 一个密码(<code>/etc/gshadow</code>)<br>-A ：将groupname 的主控权交由后面的使用者管理(该群组的管理员)<br>-M ：将某些帐号加入这个群组当中！<br>-r ：将groupname 的密码移除<br>-R ：让groupname 的密码栏失效</p>
<p>关于群组管理员(Group administrator)做的动作：<br><code>gpasswd [-ad] user groupname</code><br>选项与参数：<br>-a ：将某位使用者加入到groupname 这个群组当中！<br>-d ：将某位使用者移除出groupname 这个群组当中。</p>
<h2 id="ACL的使用（Access-Control-List）"><a href="#ACL的使用（Access-Control-List）" class="headerlink" title="ACL的使用（Access Control List）"></a>ACL的使用（Access Control List）</h2><h2 id="使用者身份切换"><a href="#使用者身份切换" class="headerlink" title="使用者身份切换"></a>使用者身份切换</h2><p><code>su [-lm] [-c指令] [username]</code><br>选项与参数：</p>
<ul>
<li>：单纯使用- 如『 su - 』代表使用login-shell 的变数文件读取方式来登入系统；<pre><code>若使用者名称没有加上去，则代表切换为root 的身份。
</code></pre>-l ：与- 类似，但后面需要加欲切换的使用者帐号！也是login-shell 的方式。<br>-m ：-m 与-p 是一样的，表示『使用目前的环境设定，而不读取新使用者的设定档』<br>-c ：仅进行一次指令，所以-c 后面可以加上指令喔！</li>
</ul>
<p>单纯使用<code>su</code> 切换成为root的身份，读取的变数设定方式为<code>non-login shell</code>的方式，这种方式很多原本的变数不会被改变，尤其是我们之前谈过很多次的PATH这个变数，由于没有改变成为root的环境，因此很多root惯用的指令就只能使用绝对路径来执行咯。其他的还有MAIL这个变数，你输入mail时，收到的邮件竟然还是dmtsai的，而不是root本身的邮件！是否觉得很奇怪啊！所以切换身份时，<strong>务必</strong>使用<code>su -</code>!</p>
<p><code>sudo [-b] [-u新使用者帐号]</code><br>选项与参数：<br>-b ：将后续的指令放到背景中让系统自行执行，而不与目前的shell 产生影响<br>-u ：后面可以接欲切换的使用者，若无此项则代表切换身份为root 。</p>
<p><strong>sudo执行的重点是</strong>：『能否使用sudo<strong>必须</strong>要看<code>/etc/sudoers</code>的设定值，而可使用sudo者是透过输入使用者自己的密码来执行后续的指令串』喔！</p>
<h3 id="visudo-与-etc-sudoers"><a href="#visudo-与-etc-sudoers" class="headerlink" title="visudo 与/etc/sudoers"></a>visudo 与<code>/etc/sudoers</code></h3><p>除了root之外的其他帐号，若想要使用sudo执行属于root的权限指令，则root需要先使用visudo去修改<code>/etc/sudoers</code> ，让该帐号能够使用全部或部分的root指令功能。</p>
<h2 id="使用者的特殊shell-与PAM-模组"><a href="#使用者的特殊shell-与PAM-模组" class="headerlink" title="使用者的特殊shell 与PAM 模组"></a>使用者的特殊shell 与PAM 模组</h2><p>PAM (Pluggable Authentication Modules, 嵌入式模组) </p>
<h2 id="用户信息查询"><a href="#用户信息查询" class="headerlink" title="用户信息查询"></a>用户信息查询</h2><h3 id="查询用户：-last-lastlog"><a href="#查询用户：-last-lastlog" class="headerlink" title="查询用户： last, lastlog"></a>查询用户： last, lastlog</h3><p>查询目前已登入在系统  <code>w, who,</code></p>
<p>查询每个帐户的最近登入的时间，则可以使用lastlog</p>
<h3 id="用户对话-write-mesg-wall"><a href="#用户对话-write-mesg-wall" class="headerlink" title="用户对话 write, mesg, wall"></a>用户对话 write, mesg, wall</h3><p><code>write vbird1 pts/2</code></p>
<h3 id="用户邮件信箱：-mail"><a href="#用户邮件信箱：-mail" class="headerlink" title="用户邮件信箱： mail"></a>用户邮件信箱： mail</h3><h3 id="帐号相关的检查工具pwck、pwconv、pwunconv"><a href="#帐号相关的检查工具pwck、pwconv、pwunconv" class="headerlink" title="帐号相关的检查工具pwck、pwconv、pwunconv"></a>帐号相关的检查工具pwck、pwconv、pwunconv</h3><p>pwck<br><code>pwck</code>这个指令在检查<code>/etc/passwd</code> 这个帐号设定档内的资讯，与实际的家目录是否存在等资讯， 还可以比对<code>/etc/passwd /etc/shadow</code>的资讯是否一致，另外，如果<code>/etc/ passwd</code> 内的资料栏位错误时，会提示使用者修订。</p>
<p>pwconv</p>
<p>这个指令主要的目的是在『将/<code>etc/passwd</code> 内的帐号与密码，移动到<code>/etc/shadow</code> 当中！』<br>如果您正常使用useradd 增加使用者时，使用pwconv 并不会有任何的动作，因为<code>/etc/passwd</code>与 <code>/etc/shadow</code>并不会有上述两点问题,不过，如果手动设定帐号，这个pwconv 就很重要</p>
<p>pwunconv</p>
<p>将/etc/shadow 内的密码栏资料写回/etc/passwd 当中， 并且删除/etc/shadow 文件。 一般不要用！</p>
<p>chpasswd</p>
<p>读入未加密前的密码，并且经过加密后，​​ 将加密后的密码写入<code>/etc/shadow</code>当中。』这个指令很常被使用在大量建置帐号的情况中喔！他可以由Standard input 读入资料，每行数据的格式是『 <code>username:password</code> 』</p>
<h3 id="大量建置帐号范本"><a href="#大量建置帐号范本" class="headerlink" title="大量建置帐号范本"></a>大量建置帐号范本</h3></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info">Wente Guo</span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info">http://chnwentao.com/2016/03/待整理/Linux-笔记-帐号管理/</span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">CC BY-NC-SA 3.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/笔记/">笔记</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/管理/">管理</a><a class="post-meta__tags" href="/tags/帐户/">帐户</a></div></article><nav id="pagination"><div class="prev-post pull-left"><a href="/2016/03/待整理/Linux-笔记-文件系统管理/"><i class="fa fa-chevron-left">  </i><span>Linux文件系统管理（进阶）</span></a></div><div class="next-post pull-right"><a href="/2016/03/待整理/Linux-笔记-文件系统管理基础/"><span>Linux文件系统管理基础学习笔记</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">©2015 - 2017 By Wente Guo</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a><span class="footer-separator">|</span><span>Hosted by </span><a href="https://pages.coding.me"><span>Coding Pages</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.3"></script><script src="/js/fancybox.js?version=1.3"></script><script src="/js/sidebar.js?version=1.3"></script><script src="/js/copy.js?version=1.3"></script><script src="/js/fireworks.js?version=1.3"></script><script src="/js/transition.js?version=1.3"></script><script src="/js/scroll.js?version=1.3"></script><script src="/js/head.js?version=1.3"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --></body></html>